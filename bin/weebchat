#!/usr/bin/env node
'use strict';

var program = require('commander'),
    project = require('../package'),
    engine  = require('../'),
    Log     = require('../src/utils/log');

program
  .version(project.version)
  .option('-p, --port', 'the port to bind to. default: 9399')
  .option('-b, --host', 'set the host to bind to. default: 0.0.0.0')
  .option('-e, --env', 'set environment to execute in. default: development')
  .option('-c, --config [path]', 'path to the config file to be used')
  .parse(process.argv);

/**
 * Main program entry point.
 *
 * @param {Object} argv - Arguments for the server to start with.
 */
function main(argv) {
  var host = argv.host || '0.0.0.0',
      port = argv.port || 9399,
      env  = argv.env  || 'development';

  engine.start(host, port, env);
}

// stuff
Log.cls();
Log.info('              .       .       .    ');
Log.info('. , , ,-. ,-. |-. ,-. |-. ,-. |-   ');
Log.info('|/|/  |-\' |-\' | | |   | | ,-| |  ');
Log.info('\' \'   `-\' `-\' ^-\' `-\' \' \' `-^ `\'');
Log.info('');

main(program);
